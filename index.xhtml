<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
  <meta charset="utf-8" />
  <title>Browserpad - A notepad in the browser</title>
  <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,R0lGODlhEAAQAKEAAAAAAICAgP///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hFDcmVhdGVkIHdpdGggR0lNUAAh+QQBZAADACwAAAAAEAAQAAACJIyPacLtvp5kEUwYmL00i81VXKeNgjiioQdeqsuakXl6tIIjBQAh+QQBZAADACwAAAAAEAAQAAACIIyPacLtvp5kcb5qG85iZ2+BkyiRV8BBaEqtrKkqslEAADs=" />
  <style>
    body { height:100%; box-sizing:border-box; margin:0; }
    textarea { width:100%; height:calc(100% - 1.5rem); border:none; outline:none; resize:none; padding:0.5em; }
    nav {
      position:fixed; bottom:0; left:0;
      box-sizing:border-box; width:100%; height:1.5rem; padding:0 0.5em;
      background-color:#eee; border-top:1px solid silver;
      line-height:1.5rem; color:gray; font-family:monospace; }
    a#save { float:right; text-decoration:none; }
    @media print { nav { display:none; } }
    #about { display:none; }
  </style>
  <script>
    var txtbox = document.querySelector("textarea");
    // tab key support
    txtbox.onkeydown = function(){
      if(event.keyCode===9){
        event.preventDefault();
        var text = this.value, s = this.selectionStart, e = this.selectionEnd;
        this.value = text.substring(0,s) + '\t' + text.substring(e);
        this.selectionStart = this.selectionEnd = s+1;
      }
    };
    // counters
    txtbox.onkeyup = function(){
      document.querySelector('#cc').textContent = this.value.length;
      document.querySelector('#wc').textContent = this.value.replace(/\s+/g, ' ').split(' ').length;
      document.querySelector('#lc').textContent = this.value.split(/\n/).length;
    };
  </script>
</head>
<body>
  <textarea autofocus placeholder="type here"></textarea>
  <nav>
    <span id="stats">
      <span id="cc">0</span> chars |
      <span id="wc">0</span> words |
      <span id="lc">0</span> lines
    </span>
    <a id="save" href download="browserpad.txt"
       onclick="this.href = 'data:text/plain;base64,' + btoa(unescape(encodeURIComponent(document.querySelector('textarea').value)));">save</a>
  </nav>
  <div id="about">
    <h2>Browserpad</h2>
    <p>As the name indicates, Browserpad is a notepad in the browser.</p>
    <p>It is a plain text editor built entirely with HTML, CSS and JavaScript.</p>
    <p>(<a href="https://github.com/Browserpad/browserpad">source code available on github</a>)</p>
  </div>
</body>
</html>
